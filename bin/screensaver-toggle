#!/bin/bash
OS=$(uname -s)

notify() {
  if [[ "$OS" == "Darwin" ]]; then
    osascript -e "display notification \"$1\" with title \"Screensaver\""
  else
    notify-send "$1"
  fi
}

STATE_FILE=~/.local/state/screensaver/toggles/screensaver-off
if [[ -f $STATE_FILE ]]; then
  rm -f "$STATE_FILE"
  notify "Screensaver enabled"
else
  mkdir -p "$(dirname "$STATE_FILE")"
  touch "$STATE_FILE"
  notify "Screensaver disabled"
fi
